# Symulator-nadajnika-Enlite
Enlite transmitter simulator


   Jest to program symulatora nadajnika glikemii dla pompy Medtronic Veo 754 z firmware 3.1E zrobiony na potrzeby testów pilota MED-LINK. Kod programu został napisany na mikrokontroler STM8 i układ radiowy RFM69HCW 868MHz. Urządzenie generuje pomiary, które na pompie układają się w przebiegi podobne do sinusoidy. Układ powstał w oparciu o nasłuch rzeczywistego nadajnika, którego numer ID jest zaszyty w programie. Prawdopodobnie numer ID nadajnika stanowi jakiś klucz, po którym pompa dokładnie wie kiedy ma się spodziewać danych z nadajnika. Zmieniając tylko numer nadajnika w programie dochodzi już do utraty sygnału, po którym pompa ostatecznie zgłasza utratę sensora. Tym samym program zamieszczony został w celach badawczych, abyśmy mogli wspólnie znaleźć ten klucz (ID nadajnika a okres nadawania jego sygnału). W programie zostały uwzględnione tylko dane zawierające główny numer sekwencji (00, 10, 20, 30, 40, 50, 60, 70) bez danych powtarzanych kilkanaście sekund póżniej (01, 11, 21, 31, 41, 51, 61, 71). Pakiet danych z transmitera Enlite zawiera bieżący pomiar i 8 poprzednich pomiarów. Program wysyła wielokrotnie powtórzone pakiety tych samych danych przez czas około 4 sekund, co pozwala na prawie ciągłe utrzymanie synchronizacji. W przypadku utraty sygnału i następnie po ponownej synchronizacji zgubione dane na wykresie glikemii w pompie są uzupełniane z danych historycznych sygnału nadajnika, co pozwala na niezakłócone działanie symulatora przez okres pełnego 6-dniowego cyklu pracy. Kod programu nie zawiera 2 godzinnego rozruchu sensora, gdy pierwsze dane zostaną odebrane przez pompę od razu jest żądanie wprowadzenia kalibracji i po 15 minutach pojawia się glikemia na ekranie pompy.
